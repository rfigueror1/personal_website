{"version":3,"file":"toast.esm.js","sources":["../../../node_modules/@babel/runtime/helpers/extends.js","../../../node_modules/@babel/runtime/helpers/classCallCheck.js","../../../node_modules/@babel/runtime/helpers/createClass.js","../../../node_modules/@babel/runtime/helpers/typeof.js","../../../node_modules/@babel/runtime/helpers/assertThisInitialized.js","../../../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","../../../node_modules/@babel/runtime/helpers/getPrototypeOf.js","../../../node_modules/@babel/runtime/helpers/setPrototypeOf.js","../../../node_modules/@babel/runtime/helpers/inherits.js","../src/toasContent.js","../src/toast.js"],"sourcesContent":["function _extends() {\n  module.exports = _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nmodule.exports = _extends;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","function _typeof2(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized;","var _typeof = require(\"../helpers/typeof\");\n\nvar assertThisInitialized = require(\"./assertThisInitialized\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn;","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf;","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits;","import * as React from 'react';\nimport PropTypes from 'prop-types';\nimport Icon from '@pile-ui/icon';\n\nclass ToastContent extends React.Component {\n  componentDidMount() {\n    this.startCloseTimer();\n  }\n\n  componentDidUpdate(prevProps) {\n    const { duration, content, iconType } = this.props;\n    if (\n      duration !== prevProps.duration ||\n      content !== prevProps.content ||\n      iconType !== prevProps.iconType\n    ) {\n      this.restartCloseTimer();\n    }\n  }\n\n  componentWillUnmount() {\n    this.clearCloseTimer();\n  }\n\n  close() {\n    this.clearCloseTimer();\n    // 执行关闭操作\n    const { onAnimateLeave } = this.props;\n    onAnimateLeave();\n  }\n\n  startCloseTimer() {\n    const { duration } = this.props;\n    if (duration) {\n      this.closeTimer = setTimeout(() => {\n        this.close();\n      }, duration * 1000);\n    }\n  }\n\n  clearCloseTimer() {\n    if (this.closeTimer) {\n      clearTimeout(this.closeTimer);\n      this.closeTimer = null;\n    }\n  }\n\n  restartCloseTimer() {\n    this.clearCloseTimer();\n    this.startCloseTimer();\n  }\n\n  render() {\n    /* eslint-disable */\n    let { content, iconType } = this.props;\n    let type = '';\n\n    switch (iconType) {\n      case 'success':\n        type = 'check-circle';\n        break;\n      case 'fail':\n        type = 'error-circle';\n        break;\n      case 'load':\n        type = 'loading';\n        content = '加载中...';\n        break;\n      case 'warn':\n        type = 'warnning-solid-circle';\n        break;\n      default:\n        type = '';\n    }\n\n    return (\n      <div className=\"pile-toast\">\n        {iconType && type ? <Icon type={type} size=\"large\" /> : null}\n        <div\n          className=\"pile-toast-content\"\n          ref={t => {\n            this.toastContent = t;\n          }}\n        >\n          {content}\n        </div>\n      </div>\n    );\n  }\n}\n\nToastContent.propTypes = {\n  content: PropTypes.string,\n  iconType: PropTypes.oneOf(['success', 'fail', 'load', 'warn', '']),\n  duration: PropTypes.number,\n  onAnimateLeave: PropTypes.func,\n};\n\nToastContent.defaultProps = {\n  content: '',\n  iconType: '',\n  duration: 3,\n  onAnimateLeave: null,\n};\n\nexport default ToastContent;\n","import * as React from 'react';\nimport ReactDOM from 'react-dom';\nimport ToastContent from './toasContent';\n\nlet messageInstance;\nconst getMessageInstance = function createMessage(properties) {\n  const div = document.createElement('div');\n\n  document.body.appendChild(div);\n\n  function destroy() {\n    ReactDOM.unmountComponentAtNode(div);\n    div.parentNode.removeChild(div);\n  }\n\n  ReactDOM.render(\n    <ToastContent {...properties} onAnimateLeave={destroy} />,\n    div\n  );\n\n  return { destroy };\n};\n\nexport default {\n  show(properties) {\n    if (messageInstance) {\n      messageInstance.destroy();\n      messageInstance = null;\n    }\n\n    messageInstance = getMessageInstance(properties);\n  },\n  hide() {\n    if (messageInstance) {\n      messageInstance.destroy();\n      messageInstance = null;\n    }\n  },\n};\n"],"names":["_typeof","ToastContent","startCloseTimer","prevProps","props","duration","content","iconType","restartCloseTimer","clearCloseTimer","onAnimateLeave","closeTimer","setTimeout","close","clearTimeout","type","React.createElement","t","toastContent","React","propTypes","PropTypes","string","oneOf","number","func","defaultProps","messageInstance","getMessageInstance","createMessage","properties","div","document","createElement","body","appendChild","destroy","ReactDOM","unmountComponentAtNode","parentNode","removeChild","render","show","hide"],"mappings":"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"}